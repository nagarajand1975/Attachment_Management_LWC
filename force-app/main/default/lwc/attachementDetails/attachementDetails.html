<template>
    <lightning-card >
            <template if:true={attachments}>
                <article class="slds-card  slds-card_boundary">
                    <div class="slds-card__header slds-grid slds-page-header">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate slds-m-bottom_medium">
                            <div class="slds-media__figure">
                                <lightning-icon icon-name="utility:attach"></lightning-icon>
                            </div>
                            <div class="slds-media__body">
                                <h2 class="slds-card__header-title">
                                        <span>Attachments/Files</span>
                                </h2>
                            </div>
                           
                        </header>
                    </div>
                    <div class="slds-card__body slds-card__body_inner">
                        <table class="slds-table slds-table_bordered slds-table_striped slds-table_cell-buffer slds-table_resizable-cols">
                            <thead class='slds-m-bottom_medium slds-m-top_medium'>
                                <tr class="slds-text-heading_label slds-p-bottom_medium slds-p-top_medium">
                                    <th scope="col">
                                        <div class="slds-truncate" title="ID">Name</div>
                                    </th>
                                    <th scope="col">
                                        <div class="slds-truncate" title="Name">Created By</div>
                                    </th>
                                    <th scope="col">
                                        <div class="slds-truncate" title="Created Date">Created Date</div>
                                    </th>
                                    <th scope="col">
                                        <div class="slds-truncate" title="Name">Last Modified By</div>
                                    </th>
                                    <th scope="col">
                                        <div class="slds-truncate" title="Name">Last Modified Date</div>
                                    </th>
                                    <th scope="col">
                                        <div class="slds-truncate" title="Name">Action</div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                        
                                <template for:each={attachments} for:item='attachment'>
                                    <tr key={attachment.ContentDocumentId}>
                                        <td>{attachment.ContentDocument.Title}</td>
                                        <td>{attachment.ContentDocument.CreatedBy.Name}</td>
                                        <td>
                                              <lightning-formatted-date-time value={attachment.ContentDocument.CreatedDate} year="numeric" month="2-digit" day="2-digit">
                                                </lightning-formatted-date-time>
                                         </td>
                                        <td>{attachment.ContentDocument.LastModifiedBy.Name}</td>
                                        <td>
                                            <lightning-formatted-date-time value={attachment.ContentDocument.LastModifiedDate} year="numeric" month="2-digit"
                                                day="2-digit">
                                            </lightning-formatted-date-time>
                                        </td>
                                        <td>
                                            <lightning-button-icon icon-name="utility:delete" variant="destructive" onclick={handlerClick}
                                                data-id={attachment.Id}>
                                            </lightning-button-icon>
                                        </td>
                                    </tr>
                        
                                </template>
                            </tbody>
                        </table>
                    </div>
                   
                </article>
            
                <!-- Confirmation Modal -->
                
                <template if:true={openModal}>
                    <div class="demo-only" style="height: 640px;">
                        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                            aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                            <div class="slds-modal__container">
                                x
                                <header class="slds-modal__header">
                                    <lightning-button-icon alternative-text="Close" variant="bare-inverse" onclick={closePopUp}
                                        class="slds-button slds-modal__close closeIcon slds-button_icon-bare slds-button_icon-inverse"
                                        icon-name="utility:close"></lightning-button-icon>
                                    <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Delete Confirmation</h2>
                                    
                                </header>
                                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                                   
                                    <p>Are you sure to delete the attachment ?</p>
                                </div>
                                <footer class="slds-modal__footer">
                                    <lightning-button variant="neutral" label="Cancel" title="Cancel" onclick={closePopUp}>
                                    </lightning-button>
                                    <lightning-button variant="brand" label="Delete" title="Delete" onclick={deleteAction}></lightning-button>
                                </footer>
                            </div>
                        </section>
                        <div class="slds-backdrop slds-backdrop_open"></div>
                    </div>
                </template>



        </template>
           
           
</lightning-card>
</template>